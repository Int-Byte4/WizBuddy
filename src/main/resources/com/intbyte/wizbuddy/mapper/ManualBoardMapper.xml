<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.intbyte.wizbuddy.mapper.ManualBoardMapper">
    <resultMap id="manualBoardResultMap" type="com.intbyte.wizbuddy.board.domain.entity.ManualBoard">
        <id property="manualCode" column="manual_code"/>
        <result property="manualTitle" column="manual_title"/>
        <result property="manualContents" column="manual_contents"/>
        <result property="manualFlag" column="manual_flag"/>
        <result property="imageUrl" column="image_url"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="shopCode" column="shop_code"/>
        <association property="users" javaType="com.intbyte.wizbuddy.user.dto.UserDTO">
            <id property="userCode" column="user_code"/>
        </association>
    </resultMap>

    <select id="findUserCodeByManualCode" resultType="int">
        SELECT
               M.user_code
          FROM manual_board M
         WHERE M.manual_code = #{ manualCode }
           AND M.manual_flag = true
    </select>

</mapper>